<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Drama Hồng Tỷ: Visual Novel Hài Hước</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #667eea;
            --secondary-color: #764ba2;
            --accent-color: #f093fb;
            --text-primary: #2d3748;
            --text-secondary: #4a5568;
            --text-light: #ffffff;
            --bg-primary: #f7fafc;
            --bg-secondary: #edf2f7;
            --shadow-light: 0 4px 6px rgba(0, 0, 0, 0.1);
            --shadow-medium: 0 10px 25px rgba(0, 0, 0, 0.15);
            --shadow-heavy: 0 20px 40px rgba(0, 0, 0, 0.2);
            --border-radius: 16px;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            color: var(--text-primary);
            overflow: hidden;
        }

        .floating-particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            animation: float 6s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); opacity: 1; }
            50% { transform: translateY(-20px) rotate(180deg); opacity: 0.8; }
        }

        #game-container {
            width: min(95vw, 900px);
            height: min(90vh, 650px);
            background: var(--text-light);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-heavy);
            overflow: hidden;
            position: relative;
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        #header {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 60px;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.9), rgba(118, 75, 162, 0.9));
            backdrop-filter: blur(20px);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 24px;
            z-index: 100;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        #game-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--text-light);
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        #controls {
            display: flex;
            gap: 8px;
        }

        .control-btn {
            width: 36px;
            height: 36px;
            border: none;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.2);
            color: var(--text-light);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
            font-size: 14px;
        }

        .control-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.05);
        }

        #background {
            position: absolute;
            top: 60px;
            left: 0;
            width: 100%;
            height: calc(100% - 60px);
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            background-size: cover;
            background-position: center;
            transition: var(--transition);
        }

        #background::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(1px);
        }

        #character-container {
            position: absolute;
            top: 60px;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            height: calc(100% - 240px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10;
        }

        #character-image {
            max-width: 350px;
            max-height: 100%;
            object-fit: contain;
            filter: drop-shadow(0 8px 32px rgba(0, 0, 0, 0.3));
            opacity: 0;
            transform: scale(0.9) translateY(20px);
            transition: var(--transition);
        }

        #character-image.visible {
            opacity: 1;
            transform: scale(1) translateY(0);
        }

        #dialogue-container {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(255, 255, 255, 0.9));
            backdrop-filter: blur(20px);
            border-top: 1px solid rgba(255, 255, 255, 0.2);
            z-index: 50;
        }

        #dialogue-box {
            padding: 24px;
            min-height: 180px;
        }

        #character-name {
            font-weight: 600;
            font-size: 18px;
            color: var(--primary-color);
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        #character-name::before {
            content: '';
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--accent-color);
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.2); opacity: 0.7; }
        }

        #dialogue-text {
            font-size: 16px;
            line-height: 1.6;
            color: var(--text-secondary);
            margin-bottom: 20px;
            opacity: 0;
            animation: fadeInText 0.8s ease-out forwards;
        }

        @keyframes fadeInText {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        #choices {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin-top: 20px;
        }

        .choice-button {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: var(--text-light);
            border: none;
            padding: 12px 24px;
            border-radius: 12px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: var(--transition);
            box-shadow: var(--shadow-light);
            position: relative;
            overflow: hidden;
            opacity: 0;
            transform: translateY(20px);
            animation: slideInChoice 0.5s ease-out forwards;
        }

        .choice-button:nth-child(1) { animation-delay: 0.1s; }
        .choice-button:nth-child(2) { animation-delay: 0.2s; }
        .choice-button:nth-child(3) { animation-delay: 0.3s; }

        @keyframes slideInChoice {
            to { opacity: 1; transform: translateY(0); }
        }

        .choice-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: var(--transition);
        }

        .choice-button:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
        }

        .choice-button:hover::before {
            left: 100%;
        }

        .choice-button:active {
            transform: translateY(0);
        }

        #progress-bar {
            position: absolute;
            top: 0;
            left: 0;
            height: 3px;
            background: var(--accent-color);
            transition: width 0.3s ease;
            z-index: 101;
        }

        .scene-transition {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            opacity: 0;
            pointer-events: none;
            z-index: 200;
            transition: opacity 0.5s ease;
        }

        .scene-transition.active {
            opacity: 1;
        }

        @media (max-width: 768px) {
            #game-container {
                width: 100vw;
                height: 100vh;
                border-radius: 0;
            }
            
            #dialogue-box {
                padding: 20px 16px;
                min-height: 160px;
            }
            
            .choice-button {
                flex: 1;
                min-width: calc(50% - 6px);
            }
        }

        .loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            display: none;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-top: 4px solid var(--accent-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="floating-particles"></div>
    
    <div id="game-container">
        <div id="progress-bar"></div>
        
        <div id="header">
            <div id="game-title">Drama Hồng Tỷ</div>
            <div id="controls">
                <button class="control-btn" onclick="toggleSound()" title="Âm thanh">🔊</button>
                <button class="control-btn" onclick="toggleFullscreen()" title="Toàn màn hình">⛶</button>
                <button class="control-btn" onclick="restartGame()" title="Chơi lại">🔄</button>
            </div>
        </div>
        
        <div id="background"></div>
        
        <div id="character-container">
            <img id="character-image" src="" alt="Character">
        </div>
        
        <div class="loading">
            <div class="spinner"></div>
        </div>
        
        <div id="dialogue-container">
            <div id="dialogue-box">
                <div id="character-name"></div>
                <div id="dialogue-text"></div>
                <div id="choices"></div>
            </div>
        </div>
        
        <div class="scene-transition"></div>
    </div>

    <script>
        class VisualNovelGame {
            constructor() {
                this.scenes = {
                    start: {
                        background: 'url("https://images.unsplash.com/photo-1522202176988-66273c2fd55f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80"), linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%)',
                        character: 'Bạn',
                        dialogue: 'Bạn là một chàng trai cô đơn ở Trung Quốc, đang lướt app hẹn hò. Bỗng thấy profile của "Hồng Tỷ" - một chị gái quyến rũ, tự xưng là "vợ người khác" thích phiêu lưu.',
                        choices: [
                            { text: 'Nhắn tin chào hỏi', next: 'greet' },
                            { text: 'Bỏ qua, nghi ngờ lừa đảo', next: 'end_safe' }
                        ]
                    },
                    greet: {
                        background: 'url("https://images.unsplash.com/photo-1518796745738-41048802f99a?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80"), linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%)',
                        character: 'Hồng Tỷ',
                        dialogue: 'Chào anh đẹp trai! Em là Hồng Tỷ đây. Em thích tặng quà miễn phí, chỉ cần anh mang dầu ăn hoặc trái cây đến nhà em thôi. Đến không?',
                        choices: [
                            { text: 'Đồng ý, mang dầu ăn đi gặp', next: 'meet' },
                            { text: 'Hỏi thêm chi tiết', next: 'question' },
                            { text: 'Từ chối, nghe lạ quá', next: 'end_safe' }
                        ]
                    },
                    question: {
                        background: 'url("https://images.unsplash.com/photo-1519389950473-47ba0277781c?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80"), linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)',
                        character: 'Hồng Tỷ',
                        dialogue: 'Ơ, anh hỏi gì vậy? Em chỉ muốn vui vẻ thôi. Đừng lo, em dùng filter giọng nói để bí mật nhé! Hehe.',
                        choices: [
                            { text: 'Vẫn đi gặp', next: 'meet' },
                            { text: 'Báo cảnh sát', next: 'end_police' }
                        ]
                    },
                    meet: {
                        background: 'url("https://images.unsplash.com/photo-1585036156171-384164a8c675?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1932&q=80"), linear-gradient(135deg, #434343 0%, #000000 100%)',
                        character: 'Hồng Tỷ',
                        dialogue: 'Chào anh! Phòng tối om để lãng mạn. Anh không nhận ra gì lạ chứ? *Cười khúc khích*',
                        choices: [
                            { text: 'Tiếp tục, không sao', next: 'reveal' },
                            { text: 'Bật đèn kiểm tra', next: 'end_discover' }
                        ]
                    },
                    reveal: {
                        background: 'url("https://images.unsplash.com/photo-1577563908411-5077b6dc7624?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80"), linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%)',
                        character: 'Bạn',
                        dialogue: 'Sau "cuộc gặp", bạn về nhà và thấy video của mình lan truyền trên mạng. Ủa, Hồng Tỷ là... đàn ông? Và bạn là nạn nhân thứ 1691?',
                        choices: [
                            { text: 'Khóc lóc, kiểm tra sức khỏe', next: 'end_bad' },
                            { text: 'Cười trừ, thành meme nổi tiếng', next: 'end_meme' }
                        ]
                    },
                    end_safe: {
                        background: 'url("https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1974&q=80"), linear-gradient(135deg, #a8ff78 0%, #78ffd6 100%)',
                        character: 'Kết Thúc',
                        dialogue: 'Bạn an toàn! Tránh được drama Hồng Tỷ. Hãy cẩn thận với app hẹn hò nhé!',
                        choices: []
                    },
                    end_police: {
                        background: 'url("https://images.unsplash.com/photo-1589829545856-d10d557cf95f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80"), linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
                        character: 'Kết Thúc',
                        dialogue: 'Bạn báo cảnh sát, Hồng Tỷ bị bắt. Bạn là anh hùng! Nhưng giờ mọi người biết bạn suýt bị lừa...',
                        choices: []
                    },
                    end_discover: {
                        background: 'url("https://images.unsplash.com/photo-1558618666-fcd25c85cd64?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80"), linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%)',
                        character: 'Kết Thúc',
                        dialogue: 'Bạn bật đèn: "Ơ, anh là đàn ông à?!" Hồng Tỷ: "Surprise!" Bạn chạy thoát, nhưng video vẫn bị quay.',
                        choices: []
                    },
                    end_bad: {
                        background: 'url("https://images.unsplash.com/photo-1582719508461-905c673771fd?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2025&q=80"), linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%)',
                        character: 'Kết Thúc',
                        dialogue: 'Bạn dương tính với... drama! Giờ đi kiểm tra sức khỏe và tránh meme trên Weibo.',
                        choices: []
                    },
                    end_meme: {
                        background: 'url("https://images.unsplash.com/photo-1611224923853-80b023f02d71?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2039&q=80"), linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%)',
                        character: 'Kết Thúc',
                        dialogue: 'Bạn trở thành meme nổi tiếng: "Tôi và dầu ăn của tôi". Ít nhất bạn kiếm được like!',
                        choices: []
                    }
                };

                this.currentScene = 'start';
                this.gameHistory = [];
                this.soundEnabled = true;
                this.totalScenes = Object.keys(this.scenes).length;
                
                this.initializeGame();
                this.createFloatingParticles();
            }

            initializeGame() {
                this.loadScene(this.currentScene);
                this.updateProgress();
            }

            createFloatingParticles() {
                const container = document.querySelector('.floating-particles');
                for (let i = 0; i < 50; i++) {
                    const particle = document.createElement('div');
                    particle.classList.add('particle');
                    particle.style.left = Math.random() * 100 + '%';
                    particle.style.top = Math.random() * 100 + '%';
                    particle.style.animationDelay = Math.random() * 6 + 's';
                    particle.style.animationDuration = (Math.random() * 3 + 3) + 's';
                    container.appendChild(particle);
                }
            }

            loadScene(sceneKey) {
                const transition = document.querySelector('.scene-transition');
                transition.classList.add('active');

                setTimeout(() => {
                    const scene = this.scenes[sceneKey];
                    
                    // Update background
                    document.getElementById('background').style.background = scene.background;
                    
                    // Update character and dialogue
                    document.getElementById('character-name').textContent = scene.character;
                    
                    // Typewriter effect for dialogue
                    this.typeWriter(scene.dialogue);
                    
                    // Update choices
                    this.updateChoices(scene.choices);
                    
                    // Update progress
                    this.currentScene = sceneKey;
                    this.gameHistory.push(sceneKey);
                    this.updateProgress();
                    
                    transition.classList.remove('active');
                }, 250);
            }

            typeWriter(text) {
                const dialogueElement = document.getElementById('dialogue-text');
                dialogueElement.textContent = '';
                let i = 0;
                
                const timer = setInterval(() => {
                    if (i < text.length) {
                        dialogueElement.textContent += text.charAt(i);
                        i++;
                    } else {
                        clearInterval(timer);
                    }
                }, 30);
            }

            updateChoices(choices) {
                const choicesDiv = document.getElementById('choices');
                choicesDiv.innerHTML = '';
                
                choices.forEach((choice, index) => {
                    const button = document.createElement('button');
                    button.classList.add('choice-button');
                    button.textContent = choice.text;
                    button.style.animationDelay = (index * 0.1) + 's';
                    button.onclick = () => this.makeChoice(choice.next);
                    choicesDiv.appendChild(button);
                });

                if (choices.length === 0) {
                    const restartButton = document.createElement('button');
                    restartButton.classList.add('choice-button');
                    restartButton.textContent = 'Chơi lại từ đầu';
                    restartButton.onclick = () => this.restartGame();
                    choicesDiv.appendChild(restartButton);
                }
            }

            makeChoice(nextScene) {
                if (this.soundEnabled) {
                    // Add sound effect here if needed
                }
                this.loadScene(nextScene);
            }

            updateProgress() {
                const progress = (this.gameHistory.length / this.totalScenes) * 100;
                document.getElementById('progress-bar').style.width = progress + '%';
            }

            restartGame() {
                this.currentScene = 'start';
                this.gameHistory = [];
                this.loadScene('start');
            }

            toggleSound() {
                this.soundEnabled = !this.soundEnabled;
                const button = event.target;
                button.textContent = this.soundEnabled ? '🔊' : '🔇';
            }

            toggleFullscreen() {
                if (!document.fullscreenElement) {
                    document.documentElement.requestFullscreen();
                } else {
                    document.exitFullscreen();
                }
            }
        }

        // Global functions for controls
        function toggleSound() {
            game.toggleSound();
        }

        function toggleFullscreen() {
            game.toggleFullscreen();
        }

        function restartGame() {
            game.restartGame();
        }

        // Initialize game when page loads
        let game;
        document.addEventListener('DOMContentLoaded', () => {
            game = new VisualNovelGame();
        });

        // Add keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            switch(e.key) {
                case 'r':
                case 'R':
                    if (e.ctrlKey) {
                        e.preventDefault();
                        game.restartGame();
                    }
                    break;
                case 'f':
                case 'F':
                    if (e.ctrlKey) {
                        e.preventDefault();
                        game.toggleFullscreen();
                    }
                    break;
                case 'm':
                case 'M':
                    if (e.ctrlKey) {
                        e.preventDefault();
                        game.toggleSound();
                    }
                    break;
            }
        });
    </script>
</body>
</html>
